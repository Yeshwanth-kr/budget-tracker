var j=Object.defineProperty,k=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var w=(s,t,n)=>t in s?j(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n,N=(s,t)=>{for(var n in t||(t={}))T.call(t,n)&&w(s,n,t[n]);if(M)for(var n of M(t))O.call(t,n)&&w(s,n,t[n]);return s},A=(s,t)=>k(s,F(t));import{r as f,j as e,n as R,M as h,a as i,F as u,B as y,C,P as G,S as E,b as P,c as V,R as H,d as U}from"./vendor.0b55ddec.js";const q=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))d(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function d(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}};q();const L=(s,t)=>{const[n,d]=f.exports.useState(()=>{const r=localStorage.getItem(s);return r!==null?JSON.parse(r):typeof t=="function"?t():t});return f.exports.useEffect(()=>{localStorage.setItem(s,JSON.stringify(n))},[s,n]),[n,d]},z=f.exports.createContext(),B="uncategorized";function b(){return f.exports.useContext(z)}const _=({children:s})=>{const[t,n]=L("budgets",[]),[d,r]=L("expenses",[]),o=c=>d.filter(a=>a.budgetId===c),l=({name:c,max:a})=>{n(m=>m.find(v=>v.name===c)?m:[...m,{id:R(),name:c,max:a}])},p=({description:c,amount:a,budgetId:m})=>{r(v=>[...v,{id:R(),description:c,amount:a,budgetId:m}])},x=c=>{r(a=>a.map(m=>m.budgetId!==c?m:A(N({},m),{budgetId:B}))),n(a=>a.filter(m=>m.id!==c))},g=c=>r(a=>a.filter(m=>m.id!==c));return e(z.Provider,{value:{budgets:t,expenses:d,getBudgetExpenses:o,addExpense:p,addBudget:l,deleteBudget:x,deleteExpense:g},children:s})},J=({show:s,handleClose:t})=>{const n=f.exports.useRef(),d=f.exports.useRef(),{addBudget:r}=b();return e(h,{show:s,onHide:t,children:i(u,{onSubmit:l=>{l.preventDefault(),r({name:n.current.value,max:parseFloat(d.current.value)}),t()},children:[e(h.Header,{closeButton:!0,children:e(h.Title,{children:"New Budget"})}),i(h.Body,{children:[i(u.Group,{className:"mb-3",controlId:"name",children:[e(u.Label,{children:"Name"}),e(u.Control,{ref:n,type:"text",required:!0})]}),i(u.Group,{className:"mb-3",controlId:"max",children:[e(u.Label,{children:"Maximum Spending"}),e(u.Control,{ref:d,type:"number",required:!0,min:0,step:.01})]}),e("div",{className:"d-flex justify-content-end",children:e(y,{variant:"primary",type:"submit",children:"Add"})})]})]})})},K=({show:s,handleClose:t,defaultBudgetId:n})=>{const d=f.exports.useRef(),r=f.exports.useRef(),o=f.exports.useRef(),{addExpense:l,budgets:p}=b();return e(h,{show:s,onHide:t,children:i(u,{onSubmit:g=>{g.preventDefault(),l({description:d.current.value,amount:parseFloat(r.current.value),budgetId:o.current.value}),t()},children:[e(h.Header,{closeButton:!0,children:e(h.Title,{children:"New Expense"})}),i(h.Body,{children:[i(u.Group,{className:"mb-3",controlId:"description",children:[e(u.Label,{children:"Description"}),e(u.Control,{ref:d,type:"text",required:!0})]}),i(u.Group,{className:"mb-3",controlId:"amount",children:[e(u.Label,{children:"Amount"}),e(u.Control,{ref:r,type:"number",required:!0,min:0,step:.01})]}),i(u.Group,{className:"mb-3",controlId:"budgetId",children:[e(u.Label,{children:"Budget"}),i(u.Select,{defaultValue:n,ref:o,type:"number",children:[e("option",{id:B,value:B,children:"Uncategorized"}),p.map(g=>e("option",{value:g.id,children:g.name},g.id))]})]}),e("div",{className:"d-flex justify-content-end",children:e(y,{variant:"primary",type:"submit",children:"Add"})})]})]})})},S=new Intl.NumberFormat("en-IN",{currency:"INR",style:"currency",minimumFractionDigits:0}),Z=(s,t)=>{const n=s/t;return n<.5?"primary":n<.75?"warning":"danger"},I=({name:s,amount:t,max:n,gray:d,onAddExpenseModalClick:r,onViewExpenseModalClick:o,hideButtons:l})=>{const p=[];return t>=n?p.push("bg-danger","bg-opacity-10"):d&&p.push("bg-light"),e(C,{className:p.join(" "),children:i(C.Body,{children:[i(C.Title,{className:"d-flex justify-content-between align-items-baseline fw-normal mb-3",children:[e("div",{className:"me-2",children:s}),i("div",{className:"d-flex align-items-baseline",children:[S.format(t),n&&i("span",{className:"text-muted fs-6 ms-1",children:["/ ",S.format(n)]})]})]}),n&&e(G,{className:"rounded-pill",variant:Z(t,n),min:0,max:n,now:t}),!l&&i(E,{direction:"horizontal",gap:"2",className:"mt-4",children:[e(y,{variant:"outline-primary",className:"ms-auto",onClick:r,children:"Add Expense"}),e(y,{variant:"outline-secondary",onClick:o,children:"View Expenses"})]})]})})},Q=()=>{const{expenses:s,budgets:t}=b(),n=s.reduce((r,o)=>r+o.amount,0),d=t.reduce((r,o)=>r+o.max,0);return d===0?null:e(I,{gray:!0,name:"Total",amount:n,max:d,hideButtons:!0})},W=s=>{const{getBudgetExpenses:t}=b(),n=t(B).reduce((d,r)=>d+r.amount,0);return n===0?null:e(I,N({gray:!0,name:"Uncategorized",amount:n},s))},X=({budgetId:s,handleClose:t})=>{const{budgets:n,getBudgetExpenses:d,deleteBudget:r,deleteExpense:o}=b(),l=B===s?{name:"Uncategorized",id:B}:n.find(x=>x.id===s),p=d(s);return i(h,{show:s!=null,onHide:t,children:[e(h.Header,{closeButton:!0,children:e(h.Title,{children:i(E,{direction:"horizontal",gap:2,children:[i("div",{children:["Expenses - ",l==null?void 0:l.name]}),s!==B&&e(y,{onClick:()=>{r(s),t()},variant:"outline-danger",children:"Delete"})]})})}),e(h.Body,{children:e(E,{direction:"vartical",gap:3,children:p.map(({id:x,description:g,amount:c})=>i(E,{direction:"horizontal",gap:2,children:[e("div",{className:"me-auto fs-4",children:g}),e("div",{className:"fs-5",children:S.format(c)}),e(y,{onClick:()=>o(x),size:"sm",variant:"outline-danger",children:"\xD7"})]},x))})})]})};function Y(){const{budgets:s,getBudgetExpenses:t}=b(),[n,d]=f.exports.useState(!1),[r,o]=f.exports.useState(!1),[l,p]=f.exports.useState(),[x,g]=f.exports.useState(),c=a=>{o(!0),g(a)};return i(P,{children:[i(V,{className:"my-4",children:[i(E,{direction:"horizontal",gap:"2",className:"mb-4",children:[e("h1",{className:"me-auto",children:"Budgets"}),e(y,{variant:"primary",onClick:()=>d(!0),children:"Add Budget"}),e(y,{variant:"outline-primary",onClick:c,children:"Add Expense"})]}),i("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem",alignItems:"flex-start"},children:[s.map(a=>{const m=t(a.id).reduce((v,D)=>v+D.amount,0);return e(I,{name:a.name,amount:m,max:a.max,onAddExpenseModalClick:()=>c(a.id),onViewExpenseModalClick:()=>p(a.id)},a.id)}),e(W,{onAddExpenseModalClick:c,onViewExpenseModalClick:()=>p(B)}),e(Q,{})]})]}),e(J,{show:n,handleClose:()=>d(!1)}),e(K,{show:r,defaultBudgetId:x,handleClose:()=>o(!1)}),e(X,{budgetId:l,handleClose:()=>p()})]})}H.render(e(U.StrictMode,{children:e(_,{children:e(Y,{})})}),document.getElementById("root"));
